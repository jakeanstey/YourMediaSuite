(this.webpackJsonpyourmediasuite=this.webpackJsonpyourmediasuite||[]).push([[0],{23:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),i=n.n(c),a=n(16),s=n.n(a),o=n(3),u=(n(23),n(2)),l=n.n(u),d=n(4),f=n(9);n(44);function b(e){var t=e.videoBlob,n=e.fileName,i=Object(c.useState)(!1),a=Object(o.a)(i,2),s=(a[0],a[1]),u=Object(c.useState)(),b=Object(o.a)(u,2),j=b[0],p=b[1],v=Object(c.useState)(),h=Object(o.a)(v,2),O=(h[0],h[1]),x=Object(c.useState)(),m=Object(o.a)(x,2),w=m[0],g=m[1],k=Object(c.useState)(!1),y=Object(o.a)(k,2),S=y[0],F=y[1];function W(e){return E.apply(this,arguments)}function E(){return(E=Object(d.a)(l.a.mark((function e(r){var c,i,a,s,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={types:[{description:"Video files ("+r+")",accept:P(r)}]},e.next=3,window.showSaveFilePicker(c);case 3:if(!N(i=e.sent,!0)){e.next=23;break}return e.next=7,i.createWritable();case 7:return a=e.sent,s=n.split(".")[0]+"."+r,F(!0),e.t0=j,e.t1=n,e.next=14,Object(f.fetchFile)(t);case 14:return e.t2=e.sent,e.t0.FS.call(e.t0,"writeFile",e.t1,e.t2),e.next=18,j.run("-i",n,s);case 18:o=j.FS("readFile",s),u=new Blob([o.buffer]),a.write(u),a.close(),F(!1);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){switch(e){case"mp4":return{"video/mp4":".mp4"};case"mov":return{"video/quicktime":".mov"};case"flv":return{"video/x-flv":".flv"};default:return{}}}function L(e){var t=e.split(":");return 60*t[0]*60+60*t[1]+parseInt(t[2])}function N(e,t){return C.apply(this,arguments)}function C(){return(C=Object(d.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},n&&(r.mode="readwrite"),e.next=4,t.queryPermission(r);case 4:if(e.t0=e.sent,"granted"!==e.t0){e.next=7;break}return e.abrupt("return",!0);case 7:return e.next=9,t.requestPermission(r);case 9:if(e.t1=e.sent,"granted"!==e.t1){e.next=12;break}return e.abrupt("return",!0);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){var e,t=Object(f.createFFmpeg)({log:!0});p(t),Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:s(!0);case 3:case"end":return e.stop()}}),e)})))();var n=console.log.bind(console);console.log=function(){for(var t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];if(r[0].startsWith("[fferr]"))if(r[0].split("[fferr]")[1].trim().startsWith("Duration")){var i=r[0].split("[fferr]")[1].split("Duration:")[1].split(",")[0].trim(),a=L(i);O(a),e=100/a}else if(r[0].split("[fferr]")[1].trim().startsWith("frame=")){var s=r[0].split("[fferr]")[1].split("time=")[1].split(" ")[0],o=L(s);g(parseInt(o*e))}n.apply(void 0,r)}}),[]),Object(r.jsx)("div",{id:"edit-controls",children:S?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h3",{children:"Rendering"}),Object(r.jsx)("div",{className:"progress-bar-container",children:Object(r.jsx)("div",{className:"progress-bar",style:{width:w/100*250},children:Object(r.jsxs)("label",{children:[w,"%"]})})})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h3",{children:"Convert"}),Object(r.jsx)("button",{onClick:function(e){return W("mp4")},children:"MP4"}),Object(r.jsx)("button",{onClick:function(e){return W("mov")},children:"MOV"}),Object(r.jsx)("button",{onClick:function(e){return W("mkv")},children:"MKV"}),Object(r.jsx)("button",{onClick:function(e){return W("flv")},children:"FLV"})]})})}var j=n(17),p=(n(45),n.p+"static/media/Plus.383195ab.svg");function v(e){var t=e.onVideoSelected,n=Object(c.useRef)(),i=Object(c.useRef)(),a=Object(c.useRef)(),s=Object(c.useState)(),u=Object(o.a)(s,2),f=(u[0],u[1]);function b(e,n){var r=URL.createObjectURL(e);f(r),a.current.src=r,i.current.style.display="none",a.current.style.display="block",t(e,n)}function v(e,t){return h.apply(this,arguments)}function h(){return(h=Object(d.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},n&&(r.mode="readwrite"),e.next=4,t.queryPermission(r);case 4:if(e.t0=e.sent,"granted"!==e.t0){e.next=7;break}return e.abrupt("return",!0);case 7:return e.next=9,t.requestPermission(r);case 9:if(e.t1=e.sent,"granted"!==e.t1){e.next=12;break}return e.abrupt("return",!0);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){n.current.addEventListener("dragover",(function(e){return e.preventDefault()})),n.current.addEventListener("drop",function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=Object(j.a)(t.dataTransfer.items),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=20;break}if("file"!==(c=r.value).kind){e.next=18;break}return e.next=9,c.getAsFileSystemHandle();case 9:if(!v(i=e.sent,!0)){e.next=18;break}if("directory"!==i.kind){e.next=14;break}e.next=18;break;case 14:return e.next=16,i.getFile();case 16:b(e.sent,i.name);case 18:e.next=4;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(2),n.e(e.t0);case 25:return e.prev=25,n.f(),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[2,22,25,28]])})));return function(t){return e.apply(this,arguments)}}()),n.current.addEventListener("click",function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.showOpenFilePicker();case 2:if(n=e.sent,r=Object(o.a)(n,1),!v(c=r[0],!0)){e.next=10;break}return e.next=8,c.getFile();case 8:b(e.sent,c.name);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[n]),Object(c.useEffect)((function(){}),[i]),Object(c.useEffect)((function(){a.current.style.display="none"}),[a]),Object(r.jsxs)("div",{id:"video-player",ref:n,children:[Object(r.jsxs)("div",{ref:i,children:[Object(r.jsx)("img",{src:p}),Object(r.jsx)("label",{children:"Choose a file..."})]}),Object(r.jsx)("video",{ref:a,controls:!0,id:"video-preview"})]})}function h(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)(),s=Object(o.a)(a,2),u=s[0],l=s[1];return Object(r.jsxs)("div",{id:"landing-page",children:[""===n?Object(r.jsxs)("div",{className:"group",children:[Object(r.jsx)("h3",{children:"Step 1:"}),Object(r.jsx)("label",{children:"Upload your video"})]}):Object(r.jsx)("label",{id:"file-name",children:n}),Object(r.jsx)(v,{onVideoSelected:function(e,t){l(e),i(t)}}),""!==n&&Object(r.jsxs)("div",{id:"edit-controls-container",children:[Object(r.jsxs)("div",{className:"group",children:[Object(r.jsx)("h3",{children:"Step 2:"}),Object(r.jsx)("label",{children:"Edit your video"})]}),Object(r.jsx)(b,{videoBlob:u,fileName:n})]})]})}n(46);function O(){return Object(r.jsx)("div",{id:"navbar",children:Object(r.jsx)("h3",{children:"Your Media Suite"})})}n(47);function x(){var e=Object(c.useState)("landing"),t=Object(o.a)(e,2),n=t[0];t[1];return Object(r.jsxs)("main",{id:"content",children:[Object(r.jsx)(O,{}),"landing"==n&&Object(r.jsx)(h,{})]})}n(48);var m=function(){return Object(r.jsx)(x,{})},w=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function g(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}!function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");w?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):g(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):g(t,e)}))}}(),s.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(m,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.520775be.chunk.js.map